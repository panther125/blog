---
title: 中断和异常
date: 2020-04-12
categories:
- 操作系统
tags:
- 操作系统
---
# 中断机制的诞生
各程序只能串行执行，系统资源利用率低。为了解决上述问题，
人们发明了操作系统（作为计算机的管理者），引入中断机制，实现了多道程序并发执行。
# 中断的概念和作用
1. 当中断发生时，CPU立即进入核心态
2. 当中断发生后，当前运行的进程暂停运行，并由操作系统内核对中断进行处理
3. 对于不同的中断信号，会进行不同的处理
发生了中断，就意味着需要操作系统介入，开展管理工作。
由于操作系统的管理工作（比如进程切换、分配I/O设备等）需要使用特权指令，
因此CPU要从用户态转为核心态。中断可以使CPU从用户态切换为核心态，使操作系统获得计算机的控制权。有了中断，才能实现多道程序并发执行。
* ["用户态→核心态”是通过中断实并且中断是唯一途径。]{.red}
* [“核心态→用户态”的切换是通过执行一个特权指令，]{.red}
[将程序状态字（PSW）的标志位设置为“用户态”]{.red}
# 中断的分类
## 内中断(异常)
信号的来源:[CPU内部]{.red}
与当前执行的指令[有关]{.red}
## 外中断
信号的来源:[CPU外部]{.red}
与当前执行的指令[无关]{.red}
# 外中断的处理过程
1. 每条指令执行结束后，CPU检查是否有外部中断信号
2. 若有外部中断信号，则需要保护被中断进程的CPU环境
3. 根据中断信号类型转入相应的中断处理程序
4. 恢复原进程的CPU环境并退出中断，返回原进程继续往下执行